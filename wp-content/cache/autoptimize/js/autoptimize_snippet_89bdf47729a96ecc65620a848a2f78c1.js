'use strict';
/*!
 * Custom v1.0
 * Contains handlers for the different site functions
 *
 * Copyright (c) 2013-2019 Allium
 * License: GNU General Public License v2 or later
 * http://www.gnu.org/licenses/gpl-2.0.html
 */
(function($){var allium={menuInit:function(){$('ul.sf-menu').superfish({delay:1500,animation:{opacity:'show',height:'show'},speed:'fast',autoArrows:false,cssArrows:true});},responsiveVideosInit:function(){$('.entry-content, .sidebar').fitVids();},responsiveMenuInit:function(){var $headerMenuClone=$('.header-menu').clone().removeAttr('class').addClass('header-menu-responsive');$headerMenuClone.removeAttr('style').find('*').each(function(i,e){$(e).removeAttr('style');});var $responsiveMenuClose=$('<div class="header-menu-responsive-close">&times;</div>');$('<div class="site-header-menu-responsive" />').insertBefore('.site-content');$headerMenuClone.appendTo('.site-header-menu-responsive');$responsiveMenuClose.appendTo('.site-header-menu-responsive');$('.site-header-menu-responsive .page_item_has_children > a, .site-header-menu-responsive .menu-item-has-children > a').append('<button class="dropdown-toggle" aria-expanded="false"/>');$('.site-header-menu-responsive .dropdown-toggle').off('click').on('click',function(e){e.preventDefault();$(this).toggleClass('toggle-on');$(this).parent().next('.children, .sub-menu').toggleClass('toggle-on');$(this).attr('aria-expanded',$(this).attr('aria-expanded')==='false'?'true':'false');});},slidePanelInit:function(){var menuResponsive=$('.site-header-menu-responsive');var overlayEffect=$('.overlay-effect');var menuResponsiveClose=$('.header-menu-responsive-close');$('.toggle-menu-control').off('click').on('click',function(e){e.preventDefault();e.stopPropagation();menuResponsive.toggleClass('show');overlayEffect.toggleClass('open');if(overlayEffect.hasClass('open')){$('body').addClass('has-responsive-menu');}});menuResponsiveClose.off('click').on('click',function(){allium.slidePanelCloseInit();});overlayEffect.off('click').on('click',function(){allium.slidePanelCloseInit();});},slidePanelCloseInit:function(){var menuResponsive=$('.site-header-menu-responsive');var overlayEffect=$('.overlay-effect');if(overlayEffect.hasClass('open')){$('body').removeClass('has-responsive-menu');if(menuResponsive.hasClass('show')){menuResponsive.toggleClass('show');}
overlayEffect.toggleClass('open');}},mqInit:function(){enquire.register('screen and ( max-width: 767px )',{deferSetup:true,setup:function(){allium.responsiveMenuInit();},match:function(){allium.slidePanelInit();$('.entry-content, .sidebar').find('table').wrap('<div class="table-responsive"></div>');},unmatch:function(){allium.slidePanelCloseInit();$('.entry-content, .sidebar').find('table').unwrap('<div class="table-responsive"></div>');}});}};$(document).ready(function(){allium.menuInit();allium.responsiveVideosInit();allium.slidePanelInit();allium.mqInit();});$(document).keyup(function(e){if(e.keyCode===27){allium.slidePanelCloseInit();}});})(jQuery);